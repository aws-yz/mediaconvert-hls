# MediaConvert参数速查表

## 🎯 核心概念

### 什么是HLS？
- **HLS** = HTTP Live Streaming
- 将视频切分成小片段（通常6-10秒）
- 生成播放列表文件(.m3u8)指向这些片段
- 支持自适应码率：根据网络状况自动切换质量

### 什么是自适应码率？
- 同一视频提供多种分辨率/码率版本
- 播放器根据网络速度自动选择最佳版本
- 网络好时播放高清，网络差时播放低清

## 📊 关键参数详解

### 视频编码参数

| 参数 | 作用 | 推荐值 | 影响 |
|------|------|--------|------|
| **Bitrate** | 视频码率 | 360p:800k, 720p:2.5M, 1080p:5M | 质量vs文件大小 |
| **Width/Height** | 输出分辨率 | 见下表 | 清晰度 |
| **GopSize** | 关键帧间隔 | 60-120帧 | 压缩效率vs质量 |
| **RateControlMode** | 码率控制 | CBR(流媒体), VBR(存储) | 文件大小稳定性 |
| **CodecProfile** | 编码配置 | MAIN | 兼容性vs压缩效率 |

### 音频编码参数

| 参数 | 作用 | 推荐值 | 说明 |
|------|------|--------|------|
| **Codec** | 音频编码器 | AAC | 最佳兼容性 |
| **Bitrate** | 音频码率 | 96-128kbps | 质量vs大小 |
| **SampleRate** | 采样率 | 48000Hz | 标准采样率 |
| **CodingMode** | 声道模式 | CODING_MODE_2_0 | 立体声 |

### HLS特定参数

| 参数 | 作用 | 推荐值 | 影响 |
|------|------|--------|------|
| **SegmentLength** | 分片长度 | 6-10秒 | 启动速度vs效率 |
| **DirectoryStructure** | 目录结构 | SINGLE_DIRECTORY | 文件组织方式 |
| **ManifestDurationFormat** | 清单格式 | INTEGER | 兼容性 |

## 🎨 分辨率对照表

| 名称 | 分辨率 | 宽高比 | 推荐码率 | 适用场景 |
|------|--------|--------|----------|----------|
| **360p** | 640×360 | 16:9 | 800kbps | 移动网络 |
| **480p** | 854×480 | 16:9 | 1.2Mbps | 标清播放 |
| **720p** | 1280×720 | 16:9 | 2.5Mbps | 高清播放 |
| **1080p** | 1920×1080 | 16:9 | 5Mbps | 全高清 |
| **4K** | 3840×2160 | 16:9 | 15-25Mbps | 超高清 |

## ⚙️ 编码配置文件对比

| 配置文件 | 压缩效率 | 兼容性 | 适用场景 |
|----------|----------|--------|----------|
| **BASELINE** | 低 | 最高 | 老设备兼容 |
| **MAIN** | 中 | 高 | 推荐选择 |
| **HIGH** | 高 | 中 | 现代设备 |

## 🔧 码率控制模式

| 模式 | 特点 | 优点 | 缺点 | 适用场景 |
|------|------|------|------|----------|
| **CBR** | 恒定码率 | 文件大小可预测 | 质量波动 | 流媒体 |
| **VBR** | 可变码率 | 质量稳定 | 文件大小不定 | 存储 |

## 📱 设备兼容性指南

### 移动设备
- 推荐: 360p, 720p
- 编码: H.264 MAIN
- 音频: AAC 96kbps

### 桌面浏览器
- 推荐: 720p, 1080p
- 编码: H.264 MAIN/HIGH
- 音频: AAC 128kbps

### 智能电视
- 推荐: 1080p, 4K
- 编码: H.264 HIGH
- 音频: AAC 128kbps

## 💰 成本优化建议

### 降低成本
1. **减少输出数量**: 只生成必需的分辨率
2. **降低码率**: 在可接受质量范围内使用较低码率
3. **使用CBR**: 更好地控制文件大小
4. **批量处理**: 一次处理多个文件

### 质量优化
1. **使用VBR**: 获得更稳定的视觉质量
2. **适当提高码率**: 特别是运动较多的视频
3. **调整GOP大小**: 根据内容类型优化

## 🚨 常见问题解决

### 编码失败
- 检查源文件格式是否支持
- 验证S3路径和权限
- 确认IAM角色配置正确

### 质量问题
- 提高视频码率
- 检查源文件质量
- 调整编码参数

### 兼容性问题
- 使用BASELINE配置文件
- 检查音频编码设置
- 验证HLS版本兼容性

## 📋 快速配置模板

### 基础配置（推荐新手）
```json
{
  "分辨率": ["720p", "360p"],
  "视频码率": ["2.5Mbps", "800kbps"],
  "音频码率": "96kbps",
  "分片长度": "10秒"
}
```

### 高质量配置
```json
{
  "分辨率": ["1080p", "720p", "480p"],
  "视频码率": ["5Mbps", "2.5Mbps", "1.2Mbps"],
  "音频码率": "128kbps",
  "分片长度": "6秒"
}
```

### 移动优化配置
```json
{
  "分辨率": ["720p", "480p", "360p"],
  "视频码率": ["2Mbps", "1Mbps", "600kbps"],
  "音频码率": "96kbps",
  "分片长度": "8秒"
}
```
